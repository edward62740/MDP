/*
 * app_motion.cpp
 *
 * Functions to control motion
 *
 *  Created on: Jan 22, 2024
 *      Author: eward62740
 *
 */
#include "app_motion.h"
#include "stm32f4xx_hal.h"
#include "cmsis_os2.h"
namespace AppMotion {
Servo::Servo(TIM_HandleTypeDef *ctrl, void (*sysDelayMs)(uint32_t ), uint32_t min,
		uint32_t max, uint32_t center) {
	this->htimer = ctrl;
	this->sysDelayMs = sysDelayMs;
	this->MIN_PWM = min;
	this->MAX_PWM = max;
	this->CTR_PWM = center;
}

void Servo::turnLeft() {
	this->htimer->Instance->CCR1 = MIN_PWM;
	sysDelayMs(TURN_DELAY_MS);

}
void Servo::turnRight() {
	this->htimer->Instance->CCR1 = MAX_PWM;
		sysDelayMs(TURN_DELAY_MS);
}

void Servo::turnFront() {
	htim1.Instance->CCR1 = CTR_PWM;
	sysDelayMs(TURN_DELAY_MS);
}
/*
void MotionController::setLeftPWM(uint16_t dutyCycle) {
	__HAL_TIM_SET_COMPARE(&htim8, TIM_CHANNEL_1, dutyCycle);
}

void MotionController::setRightPWM(uint16_t dutyCycle) {
	__HAL_TIM_SET_COMPARE(&htim8, TIM_CHANNEL_2, dutyCycle);
}
*/

}
